<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="description" content="Data ingest documentation" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

<title>Global Electrification Platform</title>

<!-- Twitter -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="" />
<meta name="twitter:title" content="Global Electrification Platform">
<meta name="twitter:description" content="Data ingest documentation" />
<meta name="twitter:image:src" content="https://global-electrification-platform.github.io/docs/assets/graphics/meta/default-meta-image.png" />
<!--/ Twitter -->

<!-- OG -->
<meta property="og:site_name" content="Global Electrification Platform" />
<meta property="og:title" content="Global Electrification Platform" />
<meta property="og:url" content="" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Data ingest documentation" />
<meta property="og:image" content="https://global-electrification-platform.github.io/docs/assets/graphics/meta/default-meta-image.png" />
<!--/ OG -->

<link rel="icon" type="image/png" sizes="96x96" href="https://global-electrification-platform.github.io/docs/assets/graphics/meta/favicon.png" />
<link rel="icon" type="image/png" sizes="192x192" href="https://global-electrification-platform.github.io/docs/assets/graphics/meta/android-chrome.png" />
<link rel="apple-touch-icon" sizes="180x180" href="https://global-electrification-platform.github.io/docs/assets/graphics/meta/apple-touch-icon.png" />


<link rel="author" type="text/plain" href="humans.txt" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i" />



<link rel="stylesheet" href="https://global-electrification-platform.github.io/docs/assets/styles/main-0122a26d2d.css">

  </head>
  <body>
    <!-- page -->
    <div class="page">

      <header class="page__header" role="banner">
        <div class="inner">
          <div class="page__headline">
            <a href="/" title="Visit homepage">
              <h1 class="page__title">Global Electrification Platform</h1>
              <p class="page__subtitle">Data ingest documentation</p>
            </a>
          </div>
          <div class="page__browser pb" data-hook="menu:wrapper">
            <h2 class="pb__title"><a href="#ppn__contents" title="Show/hide" class="pb__toggle" data-hook="menu:toggle"><span>Navigation & Colophon</span></a></h2>
            <div id="pb__contents" class="pb__contents">
              <div class="inner">
                <nav class="page__prime-nav ppn">
  
  

  
  <section class="ppn__section">
    <h3 class="ppn__section-title">Introduction</h3>
    




<ul class="ppn__menu">
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/" title="Go to page" class="ppn__menu-item ">About the platform</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/introduction/data-overview" title="Go to page" class="ppn__menu-item ">Data overview</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/introduction/the-ingest-process" title="Go to page" class="ppn__menu-item ">The ingest process</a>
      




  </li>
  
</ul>

  </section>
  
  <section class="ppn__section">
    <h3 class="ppn__section-title">Preparing the data</h3>
    




<ul class="ppn__menu">
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/model-configuration" title="Go to page" class="ppn__menu-item ">Model configuration</a>
      




<ul class="ppn__menu">
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/levers" title="Go to page" class="ppn__menu-item ">Levers</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/filters" title="Go to page" class="ppn__menu-item ">Filters</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/external-layers" title="Go to page" class="ppn__menu-item ">External layers</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/tech-layers" title="Go to page" class="ppn__menu-item ">Tech layers</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/example-file" title="Go to page" class="ppn__menu-item ">Example file</a>
      




  </li>
  
</ul>

  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/vector-tiles" title="Go to page" class="ppn__menu-item ">Vector tiles</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/preparing-the-data/scenario-results" title="Go to page" class="ppn__menu-item ">Scenario results</a>
      




  </li>
  
</ul>

  </section>
  
  <section class="ppn__section">
    <h3 class="ppn__section-title">Using the ingest tool</h3>
    




<ul class="ppn__menu">
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/using-the-ingest-tool/prepare-the-environment" title="Go to page" class="ppn__menu-item ">Prepare the environment</a>
      




  </li>
  
  <li>
      
      <a href="https://global-electrification-platform.github.io/docs/using-the-ingest-tool/available-commands" title="Go to page" class="ppn__menu-item ppn__menu-item--active">Available commands</a>
      




  </li>
  
</ul>

  </section>
  
</nav>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="page__body" role="main">
        <div class="inner">

          

          <!-- inpage -->
          <article class="inpage">
            <header class="inpage__header">
              <div class="inner">
                
                <div class="inpage__headline">
                  <p class="inpage__subtitle">Using the ingest tool</p>
                  <h1 class="inpage__title">Available commands</h1>
                </div>

              </div>
            </header>

            <div class="inpage__body">
              <div class="inner">
                <div class="prose prose--responsive">
                  <p>The <a href="https://github.com/developmentseed/gep-data-service">gep-data-service</a> comes with a CLI (command-line interface) tool to import, delete and update the data in the platform.
To install the CLI, clone the repository locally and follow instructions on &quot;Install Dependencies&quot; section. Once done, the CLI the command can be executed at repository root folder with:</p>
<pre><code>node cli/ [command]
</code></pre>
<p>The CLI will interact with the database through a connection string defined through the <code>PG_CONNECTION_STRING</code> environment variable.</p>
<pre><code>export PG_CONNECTION_STRING=&lt;connection-string&gt;
</code></pre>
<h2>list</h2>
<p>Outputs the existing models in the database. Example:</p>
<pre><code>node cli/ list
</code></pre>
<h2>delete &lt;ids…&gt;</h2>
<p>Deletes the models and respective data that match the given ids. Example:</p>
<pre><code>node cli/ delete mw-1 mw-2
</code></pre>
<h2>validate <path></h2>
<p>Validates the model and data at the given <code>path</code>. The path should point to the directory where the model and data are stored, not to the model itself. Example:</p>
<pre><code>node cli/ validate ./data/mw-1/
</code></pre>
<h2>ingest [options] <path></h2>
<p>Ingests the model and data at the given <code>path</code>. The path should point to the directory where the model and data are stored, not to the model itself. Example:</p>
<pre><code>node cli/ ingest ./data/mw-1/
</code></pre>
<p>If there is a model with the same id in the database the command will fail. If you want to re-ingest the model and override the existent one use the <code>--override</code> flag. Example:</p>
<pre><code>node cli/ ingest --override ./data/mw-1/
</code></pre>
<h2>ingest --config-only <path></h2>
<p>Updates the non-data parts of model found at the given <code>path</code>. The path should point to the directory where the model and data are stored, not to the model itself.</p>
<p>While it is not possible to update data related configurations (like levers and filters) without performing a full ingest, it is allowed to update metadata information, like descriptions and labels. Example:</p>
<pre><code>node cli/ ingest --config-only ./data/mw-1/
</code></pre>
<p>The following model properties can only be modified when doing a full ingest and the script will error if they’re changed:</p>
<pre><code>id
country
timesteps
levers (for each lever object)
  id
  options (for each option object)
    id
    value
filters (for each filter object)
  id
  key
  type
  timestep
  options (for each option object)
    id
    value
</code></pre>

                </div>
              </div>
            </div>

            <footer class="inpage__footer">
              <div class="inner">
                <nav class="inpage__actions">
                  <ul>
                    <li>
                      
                        <a href="https://global-electrification-platform.github.io/docs/using-the-ingest-tool/prepare-the-environment" class="pa-prev" title="View previous post"><span>Prev</span></a>
                      
                    </li>
                    <li>
                      
                        <a href="#" class="pa-next disabled" title="View next post"><span>Next</span></a>
                      
                    </li>
                  </ul>
                </nav>
              </div>
            </footer>
          </article>
          <!--/ inpage -->

        </div>
      </main>

      <footer class="page__footer" role="contentinfo">
        <div class="inner">
          <p>
            <a href="https://developmentseed.org" title="Visit Development Seed website">
              <span><img src="https://global-electrification-platform.github.io/docs/assets/graphics/layout/devseed-logo-symbol.svg" alt="Development Seed logo symbol" width="512" height="152" /></span>
              <strong>Development Seed</strong>
              <small>2019</small>
            </a>
          </p>
        </div>
      </footer>

    </div>
    <!--/ page -->

    <script src="https://global-electrification-platform.github.io/docs/assets/scripts/vendor-2fa80a543b.js"></script>

<script src="https://global-electrification-platform.github.io/docs/assets/scripts/bundle-7df0b6512d.js"></script>
  </body>
</html>